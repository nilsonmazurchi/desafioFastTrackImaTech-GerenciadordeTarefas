<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerenciador de Tarefas</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="container">
        <div class="form-image">
            <img src="assets/imagens/como-priorizar-tarefas-1024x682.webp">
        </div>
        <div class="form">
            <div class="center-text">
                <h2>Organize seu tempo</h2>
            </div>
            <form action="#">
                <div class="input-box">
                    <div class="form-entrada">
                        <div class="title">
                            <h4>Acesse sua conta:</h4>
                        </div>
                        <div class="input-box">
                            <input type="email" id="email" name="email" placeholder="Email" required>
                        </div>
                        <div class="input-box">
                            <input type="password" id="senhaLogin" name="senhaLogin" placeholder="Senha" required>
                        </div>
                        <div class="login-button">
                            <button type="button" class="btn" onclick="entrar()">Entrar</button>
                        </div>
                    </div>
                    <div class="form-cadastro">
                        <div class="title">
                            <h4>Novo por aqui? Crie sua conta:</h4>
                        </div>
                        <div class="input-box">
                            <input type="text" id="nome" name="nome" placeholder="Nome Completo" required>
                        </div>
                        <div class="input-box">
                            <input type="email" id="emailCadastro" name="email" placeholder="Email" required>
                        </div>
                        <div class="input-box">
                            <input type="password" id="senhaCadastro" name="senhaCadastro" placeholder="Senha" required>
                        </div>
                        <div class="cadastro-button">
                            <button type="button" class="btn" onclick="cadastrarUsuario()">Cadastrar</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

     <script>
    // ✅ FUNÇÃO CADASTRAR USUÁRIO - COLE AQUI O CÓDIGO
    function cadastrarUsuario() {
        console.log('Função cadastrarUsuario executada!');
        
        if (typeof(Storage) === "undefined") {
            alert("O seu navegador não suporta armazenamento local. Tente outro navegador.");
            return;
        }

        var nome = document.getElementById('nome').value.trim();
        var email = document.getElementById('emailCadastro').value.trim();
        var senha = document.getElementById('senhaCadastro').value.trim();

        if (!nome || !email || !senha) {
            alert('Por favor, preencha todos os campos.');
            return;
        }

        var usuariosCadastrados = [];
        try {
            usuariosCadastrados = JSON.parse(localStorage.getItem('usuarios')) || [];
        } catch (e) {
            console.error("Erro ao ler localStorage:", e);
            localStorage.removeItem('usuarios');
        }

        var usuarioExistente = usuariosCadastrados.find(user => user.email === email);
        if (usuarioExistente) {
            alert('Este e-mail já está cadastrado.');
            return;
        }

        var novoUsuario = { nome, email, senha };
        usuariosCadastrados.push(novoUsuario);
        localStorage.setItem('usuarios', JSON.stringify(usuariosCadastrados));

        document.getElementById('nome').value = '';
        document.getElementById('emailCadastro').value = '';
        document.getElementById('senhaCadastro').value = '';

        alert('Cadastro realizado com sucesso! Faça login para continuar.');
        window.location.href = "index.html";
    }

    // ✅ FUNÇÃO LOGIN - COLE AQUI O CÓDIGO
    function entrar() {   
        console.log('Função entrar executada!');
        
        var email = document.getElementById('email').value;
        var senha = document.getElementById('senhaLogin').value;

        var usuariosCadastrados = JSON.parse(localStorage.getItem('usuarios')) || [];
        
        var usuario = usuariosCadastrados.find(function (user) {
            return user.email === email && user.senha === senha;
        });

        if (!usuario) {
            alert('E-mail ou senha incorretos. Tente novamente.');
            return;
        }

        alert('Login bem-sucedido! Bem-vindo, ' + usuario.nome + '!');
        localStorage.setItem('usuario', JSON.stringify(usuario));
        window.location.href = 'home.html';
    }

    // ✅ VERIFICAÇÃO DE CARREGAMENTO
    console.log('=== ✅ JAVASCRIPT CARREGADO ===');
    console.log('cadastrarUsuario disponível:', typeof cadastrarUsuario);
    console.log('entrar disponível:', typeof entrar);
    </script>
</body>
</html>
